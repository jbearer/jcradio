<!DOCTYPE HTML>

<html>

	<!-- Header -->
		<head>
			<title>Jingle Churro Radio</title>
			<meta charset="utf-8" />
			<meta name="viewport" content="width=device-width, initial-scale=1" />
			<link rel="stylesheet" href="assets/css/main.css" />
		</head>

	<body>

	<!-- Navigation Bar -->
		<div class="topnav">
			 <a class="active" href="#home">Home</a>
			 <a href="#queue">Selector</a>
			 <a href="#Plots">Plots</a>
		</div>

	<!-- Side Bar -->
		<div class = "row">
			<div class = "column sidebar">

					<br>
					<br>
					<br>
					<h2>Jingle Churro Radio </h2>
					<br>
				
	<!-- Login -->
					<p><form action="/sessions" method="post">
						<input type="text" placeholder="Enter Name" name="uname" required>
						<button type="submit">Join Radio</button>
					</form></p>

			</div>


	<!-- Page Content -->
			<div class="column main">
				<br>
				<br>
				<br>
				test1
				<p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>test</p><p>last</p>
				<br>
				<br>
				<br>
				<br>
			</div> 
		</div>

	<!-- Music Bar -->
		<div class="musicBar">
			<div class = "columnMus leftMus">
				<p>Song name here</p>
			</div>
			<div class = "columnMus middleMus">
				<br>
				<span id="current-time"></span> 
				<canvas id="progress" width="500" height="10"></canvas>

				<audio id="audio" ontimeupdate="updateBar()" 
				       src="http://k007.kiwi6.com/hotlink/tfaw4el9c5/Moon_River_Jazz.mp3">
				</audio>
				<span id="duration"></span>
				<br>
			</div>

			<div class = "columnMus rightMus">
				<button id="audioControl" onclick="togglePlaying()">Play</button>
			</div>

		</div>

	</body>

<!-- Javascript -->
	<script>
		var canvasWidth = 500 ;
		var audioEl = document.getElementById("audio");
		var canvas = document.getElementById("progress").getContext('2d');
		var ctrl = document.getElementById('audioControl');

		audioEl.addEventListener('loadedmetadata', function() {
		  var duration = audioEl.duration;
		  var currentTime = audioEl.currentTime;
		  document.getElementById("duration").innerHTML = convertElapsedTime(duration);
		  document.getElementById("current-time").innerHTML = convertElapsedTime(currentTime);
		  canvas.fillRect(0, 0, canvasWidth, 50);
		});

		function togglePlaying() {

		  var play = ctrl.innerHTML === 'Play'
		  var method

		  if (play) {
		    ctrl.innerHTML = 'Pause'
		    method = 'play'
		  } else {
		    ctrl.innerHTML = 'Play'
		    method = 'pause'
		  }

		  audioEl[method]()

		}

		function updateBar() {
		  canvas.clearRect(0, 0, canvasWidth, 50)
		  canvas.fillStyle = "#333";
		  canvas.fillRect(0, 0, canvasWidth, 50)
		  
		  var currentTime = audioEl.currentTime
		  var duration = audioEl.duration
		  
		  if (currentTime === duration) {
		    ctrl.innerHTML = "Play"
		  }
		  
		  document.getElementById("current-time").innerHTML = convertElapsedTime(currentTime)
		  
		  var percentage = currentTime / duration
		  var progress = (canvasWidth * percentage)
		  canvas.fillStyle = "#00dbff"
		  canvas.fillRect(0, 0, progress, 50)
		}

		function convertElapsedTime(inputSeconds) {
		  var seconds = Math.floor(inputSeconds % 60)
		  if (seconds < 10) {
		    seconds = "0" + seconds
		  }
		  var minutes = Math.floor(inputSeconds / 60)
		  return minutes + ":" + seconds
		}
	</script>

</html>